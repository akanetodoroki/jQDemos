(function(b){b.jqx.jqxWidget("jqxNumberInput","",{});b.extend(b.jqx._jqxNumberInput.prototype,{defineInstance:function(){var a={value:null,decimal:0,min:-99999999,max:99999999,width:200,validationMessage:"Invalid value",height:25,textAlign:"right",readOnly:false,promptChar:"_",decimalDigits:2,decimalSeparator:".",groupSeparator:",",groupSize:3,symbol:"",symbolPosition:"left",digits:8,negative:false,negativeSymbol:"-",disabled:false,inputMode:"advanced",spinButtons:false,spinButtonsWidth:18,spinButtonsStep:1,autoValidate:true,spinMode:"advanced",enableMouseWheel:true,touchMode:"auto",rtl:false,events:["valueChanged","textchanged","mousedown","mouseup","keydown","keyup","keypress","change"],aria:{"aria-valuenow":{name:"decimal",type:"number"},"aria-valuemin":{name:"min",type:"number"},"aria-valuemax":{name:"max",type:"number"},"aria-disabled":{name:"disabled",type:"boolean"}},invalidArgumentExceptions:["invalid argument exception"]};b.extend(true,this,a);return a;},createInstance:function(a){var d=this.host.attr("value");if(d!=undefined){this.decimal=d;}if(this.value!=null){this.decimal=this.value;}this.render();},_doTouchHandling:function(){var n=this;var h=n.savedValue;if(!n.parsing){n.parsing=true;}if(n.parsing){if(n.numberInput.val()&&n.numberInput.val().indexOf("-")==0){n.setvalue("negative",true);}else{n.setvalue("negative",false);}var l=n.numberInput.val();for(var q=0;q<l.length-1;q++){var o=l.substring(q,q+1);if(isNaN(parseFloat(o))&&o!=n.symbol&&o!="%"&&o!="$"&&o!="."&&o!=","&&o!="-"){n.numberInput[0].value=h;n.parsing=false;return;}}n.ValueString=n.GetValueString(n.numberInput.val(),n.decimalSeparator,n.decimalSeparator!="");n.ValueString=new Number(n.ValueString).toFixed(n.decimalDigits);n._parseDecimalInSimpleMode();n.decimal=n.ValueString;var a=n.getvalue("negative");if(a){n.decimal="-"+n.ValueString;}n.parsing=false;}},render:function(){this.host.attr({role:"spinbutton"});this.host.attr("data-role","input");b.jqx.aria(this);b.jqx.aria(this,"aria-multiline",false);var r=this;if(this.officeMode||(this.theme&&this.theme.indexOf("office")!=-1)){if(this.spinButtonsWidth==18){this.spinButtonsWidth=15;}}if(b.jqx.mobile.isTouchDevice()||this.touchMode===true){this.inputMode="textbox";this.spinMode="simple";}if(this.decimalSeparator==""){this.decimalSeparator=" ";}this.host.addClass(this.toThemeProperty("jqx-input"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this.host.addClass(this.toThemeProperty("jqx-numberinput"));if(this.spinButtons){this._spinButtons();}else{this.numberInput=b("<input autocomplete='off' type='textarea'/>").appendTo(this.host);this.numberInput.addClass(this.toThemeProperty("jqx-input-content"));this.numberInput.addClass(this.toThemeProperty("jqx-widget-content"));}var t=this.host.attr("name");if(t){this.numberInput.attr("name",t);}if(this.host.attr("tabindex")){this.numberInput.attr("tabindex",this.host.attr("tabindex"));this.host.removeAttr("tabindex");}if(b.jqx.mobile.isTouchDevice()||this.touchMode===true||this.inputMode=="textbox"){var r=this;r.savedValue="";this.addHandler(this.numberInput,"focus",function(){r.savedValue=r.numberInput[0].value;});this.addHandler(this.numberInput,"change",function(){r._doTouchHandling();});}var o=b.data(this.host[0],"jqxNumberInput");o.jqxNumberInput=this;var r=this;if(this.host.parents("form").length>0){this.addHandler(this.host.parents("form"),"reset",function(){setTimeout(function(){r.setDecimal(0);},10);});}this.propertyChangeMap.disabled=function(f,d,e,c){if(c){f.numberInput.addClass(u.toThemeProperty("jqx-input-disabled"));f.numberInput.attr("disabled",true);}else{f.host.removeClass(u.toThemeProperty("jqx-input-disabled"));f.numberInput.attr("disabled",false);}if(f.spinButtons&&f.host.jqxRepeatButton){f.upbutton.jqxRepeatButton({disabled:c});f.downbutton.jqxRepeatButton({disabled:c});}};if(this.disabled){this.numberInput.addClass(this.toThemeProperty("jqx-input-disabled"));this.numberInput.attr("disabled",true);this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));}this.selectedText="";this.decimalSeparatorPosition=-1;var n=this.element.id;var s=this.element;var u=this;this.oldValue=this._value();this.items=new Array();var q=this.value;var a=this.decimal;this._initializeLiterals();this._render();this.setDecimal(a);var r=this;setTimeout(function(){r._render(false);},100);this._addHandlers();b.jqx.utilities.resize(this.host,function(){r._render();});},refresh:function(a){if(!a){this._render();}},wheel:function(g,h){if(!h.enableMouseWheel){return;}var f=0;if(!g){g=window.event;}if(g.originalEvent&&g.originalEvent.wheelDelta){g.wheelDelta=g.originalEvent.wheelDelta;}if(g.wheelDelta){f=g.wheelDelta/120;}else{if(g.detail){f=-g.detail/3;}}if(f){var a=h._handleDelta(f);if(g.preventDefault){g.preventDefault();}if(g.originalEvent!=null){g.originalEvent.mouseHandled=true;}if(g.stopPropagation!=undefined){g.stopPropagation();}if(a){a=false;g.returnValue=a;return a;}else{return false;}}if(g.preventDefault){g.preventDefault();}g.returnValue=false;},_handleDelta:function(a){if(a<0){this.spinDown();}else{this.spinUp();}return true;},_addHandlers:function(){var a=this;this.addHandler(this.numberInput,"mousedown",function(c){return a._raiseEvent(2,c);});this._mousewheelfunc=this._mousewheelfunc||function(c){if(!a.editcell){a.wheel(c,a);return false;}};this.removeHandler(this.host,"mousewheel",this._mousewheelfunc);this.addHandler(this.host,"mousewheel",this._mousewheelfunc);var d="";this.addHandler(this.numberInput,"focus",function(c){b.data(a.numberInput,"selectionstart",a._selection().start);a.host.addClass(a.toThemeProperty("jqx-fill-state-focus"));if(a.spincontainer){a.spincontainer.addClass(a.toThemeProperty("jqx-numberinput-focus"));}d=a.numberInput.val();});this.addHandler(this.numberInput,"blur",function(g){if(a.inputMode=="simple"){a._exitSimpleInputMode(g,a,false,d);}if(a.autoValidate){var c=parseFloat(a.decimal);var h=a.getvalue("negative");if(h&&a.decimal>0){c=-parseFloat(a.decimal);}if(c>a.max){a._disableSetSelection=true;a.setDecimal(a.max);a._disableSetSelection=false;}if(c<a.min){a._disableSetSelection=true;a.setDecimal(a.min);a._disableSetSelection=false;}}a.host.removeClass(a.toThemeProperty("jqx-fill-state-focus"));if(a.spincontainer){a.spincontainer.removeClass(a.toThemeProperty("jqx-numberinput-focus"));}if(a.numberInput.val()!=d){a._raiseEvent(7,g);b.jqx.aria(a,"aria-valuenow",a.decimal);a.element.value=a.decimal;}return true;});this.addHandler(this.numberInput,"mouseup",function(c){return a._raiseEvent(3,c);});this.addHandler(this.numberInput,"keydown",function(c){return a._raiseEvent(4,c);});this.addHandler(this.numberInput,"keyup",function(c){return a._raiseEvent(5,c);});this.addHandler(this.numberInput,"keypress",function(c){return a._raiseEvent(6,c);});},focus:function(){try{this.numberInput.focus();}catch(a){}},_removeHandlers:function(){var a=this;this.removeHandler(this.numberInput,"mousedown");var d=b.jqx.mobile.isOperaMiniMobileBrowser();if(d){this.removeHandler(b(document),"click."+this.element.id,a._exitSimpleInputMode,a);}this.removeHandler(this.numberInput,"focus");this.removeHandler(this.numberInput,"blur");this.removeHandler(this.numberInput,"mouseup");this.removeHandler(this.numberInput,"keydown");this.removeHandler(this.numberInput,"keyup");this.removeHandler(this.numberInput,"keypress");},_spinButtons:function(){if(this.host.jqxRepeatButton){if(!this.numberInput){this.numberInput=b("<input autocomplete='off' style='position: relative; float: left;' type='textarea'/>");this.numberInput.appendTo(this.host);this.numberInput.addClass(this.toThemeProperty("jqx-input-content"));this.numberInput.addClass(this.toThemeProperty("jqx-widget-content"));}else{this.numberInput.css("float","left");}if(this.spincontainer){if(this.upbutton){this.upbutton.jqxRepeatButton("destroy");}if(this.downbutton){this.downbutton.jqxRepeatButton("destroy");}this.spincontainer.remove();}this.spincontainer=b('<div style="float: right; height: 100%; overflow: hidden; position: relative;"></div>');if(this.rtl){this.spincontainer.css("float","right");this.numberInput.css("float","right");this.spincontainer.css("left","-1px");}this.host.append(this.spincontainer);this.upbutton=b('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div></div></div>');this.spincontainer.append(this.upbutton);this.upbutton.jqxRepeatButton({overrideTheme:true,disabled:this.disabled,roundedCorners:"top-right"});this.downbutton=b('<div style="overflow: hidden; padding: 0px; margin-left: -1px; position: relative;"><div></div></div>');this.spincontainer.append(this.downbutton);this.downbutton.jqxRepeatButton({overrideTheme:true,disabled:this.disabled,roundedCorners:"bottom-right"});var e=this;this.downbutton.addClass(this.toThemeProperty("jqx-fill-state-normal"));this.upbutton.addClass(this.toThemeProperty("jqx-fill-state-normal"));this.upbutton.addClass(this.toThemeProperty("jqx-rc-tr"));this.downbutton.addClass(this.toThemeProperty("jqx-rc-br"));this.addHandler(this.downbutton,"mouseup",function(c){if(!e.disabled){e.downbutton.removeClass(e.toThemeProperty("jqx-fill-state-pressed"));e._downArrow.removeClass(e.toThemeProperty("jqx-icon-arrow-down-selected"));}});this.addHandler(this.upbutton,"mouseup",function(c){if(!e.disabled){e.upbutton.removeClass(e.toThemeProperty("jqx-fill-state-pressed"));e._upArrow.removeClass(e.toThemeProperty("jqx-icon-arrow-up-selected"));}});this.removeHandler(b(document),"mouseup."+this.element.id);this.addHandler(b(document),"mouseup."+this.element.id,function(c){e.upbutton.removeClass(e.toThemeProperty("jqx-fill-state-pressed"));e._upArrow.removeClass(e.toThemeProperty("jqx-icon-arrow-up-selected"));e.downbutton.removeClass(e.toThemeProperty("jqx-fill-state-pressed"));e._downArrow.removeClass(e.toThemeProperty("jqx-icon-arrow-down-selected"));});this.addHandler(this.downbutton,"mousedown",function(c){if(!e.disabled){if(b.jqx.browser.msie&&b.jqx.browser.version<9){e._inputSelection=e._selection();}e.downbutton.addClass(e.toThemeProperty("jqx-fill-state-pressed"));e._downArrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-selected"));c.preventDefault();c.stopPropagation();return false;}});this.addHandler(this.upbutton,"mousedown",function(c){if(!e.disabled){if(b.jqx.browser.msie&&b.jqx.browser.version<9){e._inputSelection=e._selection();}e.upbutton.addClass(e.toThemeProperty("jqx-fill-state-pressed"));e._upArrow.addClass(e.toThemeProperty("jqx-icon-arrow-up-selected"));c.preventDefault();c.stopPropagation();return false;}});this.addHandler(this.upbutton,"mouseenter",function(c){e.upbutton.addClass(e.toThemeProperty("jqx-fill-state-hover"));e._upArrow.addClass(e.toThemeProperty("jqx-icon-arrow-up-hover"));});this.addHandler(this.upbutton,"mouseleave",function(c){e.upbutton.removeClass(e.toThemeProperty("jqx-fill-state-hover"));e._upArrow.removeClass(e.toThemeProperty("jqx-icon-arrow-up-hover"));});this.addHandler(this.downbutton,"mouseenter",function(c){e.downbutton.addClass(e.toThemeProperty("jqx-fill-state-hover"));e._downArrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-hover"));});this.addHandler(this.downbutton,"mouseleave",function(c){e.downbutton.removeClass(e.toThemeProperty("jqx-fill-state-hover"));e._downArrow.removeClass(e.toThemeProperty("jqx-icon-arrow-down-hover"));});this.upbutton.css("border-width","0px");this.downbutton.css("border-width","0px");if(this.disabled){this.upbutton[0].disabled=true;this.downbutton[0].disabled=true;}else{this.upbutton[0].disabled=false;this.downbutton[0].disabled=false;}this.spincontainer.addClass(this.toThemeProperty("jqx-input"));this.spincontainer.addClass(this.toThemeProperty("jqx-rc-r"));this.spincontainer.css("border-width","0px");if(!this.rtl){this.spincontainer.css("border-left-width","1px");}else{this.spincontainer.css("border-right-width","1px");}this._upArrow=this.upbutton.find("div");this._downArrow=this.downbutton.find("div");this._upArrow.addClass(this.toThemeProperty("jqx-icon-arrow-up"));this._downArrow.addClass(this.toThemeProperty("jqx-icon-arrow-down"));this._upArrow.addClass(this.toThemeProperty("jqx-input-icon"));this._downArrow.addClass(this.toThemeProperty("jqx-input-icon"));var e=this;this._upArrow.hover(function(){if(!e.disabled){e._upArrow.addClass(e.toThemeProperty("jqx-icon-arrow-up-hover"));}},function(){e._upArrow.removeClass(e.toThemeProperty("jqx-icon-arrow-up-hover"));});this._downArrow.hover(function(){if(!e.disabled){e._downArrow.addClass(e.toThemeProperty("jqx-icon-arrow-down-hover"));}},function(){e._downArrow.removeClass(e.toThemeProperty("jqx-icon-arrow-down-hover"));});var a=b.jqx.mobile.isTouchDevice();var f="click";if(a){f=b.jqx.mobile.getTouchEventName("touchstart");}if(a){this.addHandler(this.downbutton,"click",function(c){e.spinDown();});this.addHandler(this.upbutton,"click",function(c){e.spinUp();});}this.addHandler(this.downbutton,f,function(c){if(!a){if(e._selection().start==0){e._setSelectionStart(e.numberInput.val().length);}if(b.jqx.browser.msie&&b.jqx.browser.version<9){e._setSelectionStart(e._inputSelection.start);}}else{c.preventDefault();c.stopPropagation();}e.spinDown();return false;});this.addHandler(this.upbutton,f,function(c){if(!a){if(e._selection().start==0){e._setSelectionStart(e.numberInput.val().length);}if(b.jqx.browser.msie&&b.jqx.browser.version<9){e._setSelectionStart(e._inputSelection.start);}}else{c.preventDefault();c.stopPropagation();}e.spinUp();return false;});}else{throw new Error("jqxNumberInput: Missing reference to jqxbuttons.js.");}},spinDown:function(){var x=this;if(x.spinMode=="none"){return;}if(this.decimal==null){this.setDecimal(-1);return;}var G=this.getvalue("negative");var J=G?-1:0;if(b.jqx.mobile.isTouchDevice()||this.inputMode=="textbox"){x._doTouchHandling();}if(!x.disabled){var a=this._selection();var w=this.decimal;var z=this.getDecimal();if(z<this.min){z=this.min;this.setDecimal(this.min);this._setSelectionStart(a.start);this.spinDown();return;}else{if(z>this.max){z=this.max;this.setDecimal(this.max);this._setSelectionStart(a.start);this.spinDown();return;}}if(x.spinButtonsStep<0){x.spinButtonsStep=1;}var E=parseInt(x.decimal)-x.spinButtonsStep;E=E.toString().length;var C=J+E<=x.digits;if(x.spinMode!="advanced"){if(z-x.spinButtonsStep>=x.min&&C){var H=1;for(B=0;B<x.decimalDigits;B++){H=H*10;}var D=(H*z)-(H*x.spinButtonsStep);D=D/H;D=this._parseDecimalValueToEditorValue(D);x.setDecimal(D);}}else{var K=this._getspindecimal();var y=this._getSeparatorPosition();var z=parseFloat(K.decimal);if(x.spinButtonsStep<0){x.spinButtonsStep=1;}var E=parseInt(z)-x.spinButtonsStep;E=E.toString().length;var C=J+E<=x.digits;var H=1;var F=K.decimal.indexOf(".");if(F!=-1){var A=K.decimal.length-F-1;var H=1;for(var B=0;B<A;B++){H=H*10;}z-=new Number(x.spinButtonsStep/H);z=z.toFixed(A);var F=z.toString().indexOf(".");if(F==-1){z=z.toString()+".";}var I=z.toString()+K.afterdecimal;I=new Number(I);I=I.toFixed(x.decimalDigits);if(I>=x.min){I=this._parseDecimalValueToEditorValue(I);x.setDecimal(I);}}else{if(z-x.spinButtonsStep>=x.min&&C){var D=(H*z)-(H*x.spinButtonsStep);D=D/H;var I=D.toString()+K.afterdecimal;if(I>=x.min){I=this._parseDecimalValueToEditorValue(I);x.setDecimal(I);}}}}if(I==undefined||this.inputMode!="simple"){this._setSelectionStart(a.start);x.savedValue=x.numberInput[0].value;if(b.jqx.mobile.isTouchDevice()){this._raiseEvent(0,{});}this._raiseEvent(7,{});b.jqx.aria(self,"aria-valuenow",this.decimal);return;}I=this.decimal.toString();var G=this.getvalue("negative");if(J==0&&G){this._setSelectionStart(a.start+1);}else{if((I!=undefined&&(w==undefined||w.toString().length==I.length))){this._setSelectionStart(a.start);}else{if(G){this._setSelectionStart(a.start+1);}else{this._setSelectionStart(a.start-1);}}}if(b.jqx.mobile.isTouchDevice()){this._raiseEvent(0,{});}this._raiseEvent(7,{});b.jqx.aria(self,"aria-valuenow",this.decimal);}},_getspindecimal:function(){var d=this._selection();var a="";var v=this._getSeparatorPosition();var D=this._getVisibleItems();var A=this._getHiddenPrefixCount();var E=this.numberInput.val();if(this.numberInput.val().length==d.start&&d.length==0){this._setSelection(d.start,d.start+1);d=this._selection();}var w=this.inputMode!="advanced";for(var B=0;B<d.start;B++){if(w){var u=E.substring(B,B+1);var x=(!isNaN(parseInt(u)));if(x){a+=u;}if(u==this.decimalSeparator){a+=u;}continue;}if(D[B].canEdit&&D[B].character!=this.promptChar){a+=D[B].character;}else{if(!D[B].canEdit&&this.decimalSeparatorPosition!=-1&&D[B]==D[this.decimalSeparatorPosition-A]){if(a.length==0){a="0";}a+=D[B].character;}}}var y="";for(var B=d.start;B<D.length;B++){if(w){var u=E.substring(B,B+1);var x=(!isNaN(parseInt(u)));if(x){y+=u;}if(u==this.decimalSeparator){y+=u;}continue;}if(D[B].canEdit&&D[B].character!=this.promptChar){y+=D[B].character;}else{if(!D[B].canEdit&&this.decimalSeparatorPosition!=-1&&D[B]==D[this.decimalSeparatorPosition-A]){y+=D[B].character;}}}var C=this.getvalue("negative");var z=C?"-"+this._parseDecimalValue(a).toString():this._parseDecimalValue(a).toString();return{decimal:z,afterdecimal:this._parseDecimalValue(y)};},_parseDecimalValue:function(f){if(this.decimalSeparator!="."){var e=f.toString().indexOf(this.decimalSeparator);if(e>=0){var a=f.toString().substring(0,e)+"."+f.toString().substring(e+1);return a;}}return f;},_parseDecimalValueToEditorValue:function(f){if(this.decimalSeparator!="."){var e=f.toString().indexOf(".");if(e>=0){var a=f.toString().substring(0,e)+this.decimalSeparator+f.toString().substring(e+1);return a;}}return f;},spinUp:function(){var x=this;if(x.spinMode=="none"){return;}if(this.decimal==null){this.setDecimal(1);return;}if(b.jqx.mobile.isTouchDevice()||this.inputMode=="textbox"){x._doTouchHandling();}var H=this.getvalue("negative");var K=H?-1:0;if(!x.disabled){var M=this._selection();var a=x.decimal;var z=x.getDecimal();if(z<this.min){z=this.min;this.setDecimal(this.min);this._setSelectionStart(M.start);this.spinUp();return;}else{if(z>this.max){z=this.max;this.setDecimal(this.max);this._setSelectionStart(M.start);this.spinUp();return;}}if(x.spinButtonsStep<0){x.spinButtonsStep=1;}var F=parseInt(x.decimal)+x.spinButtonsStep;F=F.toString().length;var C=K+F<=x.digits;if(x.spinMode!="advanced"){if(z+x.spinButtonsStep<=x.max&&C){var I=1;for(var A=0;A<x.decimalDigits;A++){I=I*10;}var D=(I*z)+(I*x.spinButtonsStep);D=D/I;D=this._parseDecimalValueToEditorValue(D);x.setDecimal(D);}}else{var L=this._getspindecimal();var y=this._getSeparatorPosition();var z=parseFloat(L.decimal);if(x.spinButtonsStep<0){x.spinButtonsStep=1;}var F=parseInt(z)+x.spinButtonsStep;F=F.toString().length;var C=K+F<=x.digits;var I=1;var G=L.decimal.indexOf(".");if(G!=-1){var B=L.decimal.length-G-1;var I=1;for(var A=0;A<B;A++){I=I*10;}z+=new Number(x.spinButtonsStep/I);z=z.toFixed(B);var G=z.toString().indexOf(".");if(G==-1){z=z.toString()+".";}var J=z.toString()+L.afterdecimal;J=new Number(J);J=J.toFixed(x.decimalDigits);var E=new Number(J).toFixed(x.decimalDigits);if(E<=x.max){J=this._parseDecimalValueToEditorValue(J);x.setDecimal(J);}else{J=undefined;}}else{if(z+x.spinButtonsStep<=x.max&&C){var D=(I*z)+(I*x.spinButtonsStep);D=D/I;var J=D.toString()+L.afterdecimal;var E=new Number(J).toFixed(x.decimalDigits);if(E<=x.max){J=this._parseDecimalValueToEditorValue(J);if(H&&J.indexOf("-")==-1){if(L.decimal!="-0"){J="-"+J;}}x.setDecimal(J);}else{J=undefined;}}}}if(J==undefined||this.inputMode!="simple"){this._setSelectionStart(M.start);x.savedValue=x.numberInput[0].value;if(b.jqx.mobile.isTouchDevice()){this._raiseEvent(0,{});}this._raiseEvent(7,{});b.jqx.aria(self,"aria-valuenow",this.decimal);return;}J=this.decimal.toString();var H=this.getvalue("negative");if(K==-1&&!H){this._setSelectionStart(-1+M.start);}else{if((J!=undefined&&(a==undefined||a.toString().length==J.length))){this._setSelectionStart(M.start);}else{if(H){this._setSelectionStart(M.start);}else{this._setSelectionStart(1+M.start);}}}if(b.jqx.mobile.isTouchDevice()){this._raiseEvent(0,{});}this._raiseEvent(7,{});b.jqx.aria(self,"aria-valuenow",this.decimal);}},_exitSimpleInputMode:function(A,r,u,y){if(r==undefined){r=A.data;}if(r==null){return;}if(u==undefined){if(A.target!=null&&r.element!=null){if((A.target.id!=undefined&&A.target.id.toString().length>0&&r.host.find("#"+A.target.id).length>0)||A.target==r.element){return;}}var w=r.host.offset();var x=w.left;var v=w.top;var z=r.host.width();var s=r.host.height();var a=b(A.target).offset();if(a.left>=x&&a.left<=x+z){if(a.top>=v&&a.top<=v+s){return;}}}if(b.jqx.mobile.isOperaMiniBrowser()){r.numberInput.attr("readonly",true);}if(r.disabled||r.readOnly){return;}var t=b.data(r.numberInput,"simpleInputMode");if(t==null){return;}b.data(r.numberInput,"simpleInputMode",null);this._parseDecimalInSimpleMode();return false;},_getDecimalInSimpleMode:function(){var e=this.decimal;if(this.decimalSeparator!="."){var a=e.toString().indexOf(this.decimalSeparator);if(a>0){var f=e.toString().substring(0,a);var e=f+"."+e.toString().substring(a+1);}}return e;},_parseDecimalInSimpleMode:function(w){var a=this;var y=a.getvalue("negative");var v=this.ValueString;if(v==undefined){v=this.GetValueString(this.numberInput.val(),this.decimalSeparator,this.decimalSeparator!="");}if(this.decimalSeparator!="."){var t=v.toString().indexOf(".");if(t>0){var u=v.toString().substring(0,t);var x=u+this.decimalSeparator+v.toString().substring(t+1);v=x;}}var s=y?"-":"";if(this.symbolPosition=="left"){s+=this.symbol;}var r=this.digits%this.groupSize;if(r==0){r=this.groupSize;}var q=v.toString();if(q.indexOf("-")>=0){q=q.substring(q.indexOf("-")+1);}s+=q;if(this.symbolPosition=="right"){s+=this.symbol;}if(w!=false){a.numberInput.val(s);}},_enterSimpleInputMode:function(g,l){if(l==undefined){l=g.data;}var h=this._selection();if(l==null){return;}var n=l.getvalue("negative");var a=l.decimal;if(n){if(a>0){a=-a;}}l.numberInput.val(a);b.data(l.numberInput,"simpleInputMode",true);if(b.jqx.mobile.isOperaMiniBrowser()){l.numberInput.attr("readonly",false);}this._parseDecimalInSimpleMode();this._setSelectionStart(h.start);},setvalue:function(a,d){if(this[a]!==undefined){if(a=="decimal"){this._setDecimal(d);}else{this[a]=d;this.propertyChangedHandler(this,a,d,d);}}},getvalue:function(a){if(a=="decimal"){if(this.negative!=undefined&&this.negative==true){return -Math.abs(this[a]);}}if(a in this){return this[a];}return null;},_getString:function(){var f="";for(var a=0;a<this.items.length;a++){var e=this.items[a].character;f+=e;}return f;},_literal:function(g,a,h,f){return{character:g,regex:a,canEdit:h,isSeparator:f};},_initializeLiterals:function(){if(this.inputMode=="textbox"){return;}var w=0;var z=this.negativeSymbol.length;for(var A=0;A<z;A++){var x=this.negativeSymbol.substring(A,A+1);var u="";var C=false;var t=null;if(this.negative){t=this._literal(x,u,C,false);}else{t=this._literal("",u,C,false);}this.items[w]=t;w++;}var B=this.symbol.length;if(this.symbolPosition=="left"){for(A=0;A<B;A++){var x=this.symbol.substring(A,A+1);var u="";var C=false;var t=this._literal(x,u,C,false);this.items[w]=t;w++;}}var y=this.digits%this.groupSize;if(y==0){y=this.groupSize;}for(var A=0;A<this.digits;A++){var x=this.promptChar;var u="\\d";var C=true;var t=this._literal(x,u,C,false);this.items[w]=t;w++;if(A<this.digits-1&&this.groupSeparator!=undefined&&this.groupSeparator.length>0){y--;if(y==0){y=this.groupSize;var v=this._literal(this.groupSeparator,"",false,false);this.items[w]=v;w++;}}else{if(A==this.digits-1){t.character=0;}}}this.decimalSeparatorPosition=-1;if(this.decimalDigits!=undefined&&this.decimalDigits>0){var x=this.decimalSeparator;if(x.length==0){x=".";}var t=this._literal(x,"",false,true);this.items[w]=t;this.decimalSeparatorPosition=w;w++;for(var A=0;A<this.decimalDigits;A++){var a=0;var u="\\d";var s=this._literal(a,u,true,false);this.items[w]=s;w++;}}if(this.symbolPosition=="right"){for(var A=0;A<B;A++){var x=this.symbol.substring(A,A+1);var u="";var C=false;var t=this._literal(x,u,C);this.items[w]=t;w++;}}},_match:function(f,a){var e=new RegExp(a,"i");return e.test(f);},_raiseEvent:function(E,M){var G=this.events[E];var N={};N.owner=this;if(this.host.css("display")=="none"){return true;}var e=M.charCode?M.charCode:M.keyCode?M.keyCode:0;var L=true;var J=this.readOnly;var A=this;if(E==3||E==2){if(!this.disabled){if(this.inputMode!="simple"&&this.inputMode!="textbox"){this._handleMouse(M);}else{return true;}}}if(E==0){var K=this.getvalue("decimal");if((this.max<K)||(this.min>K)){this.host.addClass(this.toThemeProperty("jqx-input-invalid"));}else{this.host.removeClass(this.toThemeProperty("jqx-input-invalid"));this.host.addClass(this.toThemeProperty("jqx-input"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));}}var D=new b.Event(G);D.owner=this;N.value=this.getvalue("decimal");N.text=this.numberInput.val();D.args=N;if(G!=undefined){if(E!=4&&E!=5&&E!=6){L=this.host.trigger(D);}}var A=this;if(this.inputMode=="textbox"){return L;}if(this.inputMode!="simple"){if(E==4){if(J||this.disabled){return false;}L=A._handleKeyDown(M,e);}else{if(E==5){if(J||this.disabled){L=false;}}else{if(E==6){if(J||this.disabled){return false;}L=A._handleKeyPress(M,e);}}}}else{if(E==4||E==5||E==6){if(b.jqx.mobile.isTouchDevice()||this.touchMode===true){return true;}if(J||this.disabled){return false;}var z=String.fromCharCode(e);var F=parseInt(z);var C=true;if(!M.ctrlKey&&!M.shiftKey&&!M.metaKey){if(e>=65&&e<=90){C=false;}}if(E==6&&b.jqx.browser.opera!=undefined){if(e==8){return false;}}if(C){if(E==4){C=A._handleSimpleKeyDown(M,e);}if(e==189||e==45||e==109||e==173){var a=A._selection();if(E==4){var I=A.getvalue("negative");if(I==false){A.setvalue("negative",true);}else{A.setvalue("negative",false);}A.decimal=A.ValueString;A._parseDecimalInSimpleMode();A._setSelectionStart(a.start);C=false;A._raiseEvent(0,A.value);A._raiseEvent(1,A.numberInput.val());}}var O=N.ctrlKey||N.metaKey;if(!b.jqx.browser.msie){var B=M;if((O&&e==99)||(O&&e==67)||(O&&e==122)||(O&&e==90)||(O&&e==118)||(O&&e==86)||(B.shiftKey&&e==45)){if(b.jqx.browser.webkit||b.jqx.browser.chrome){A._handleSimpleKeyDown(M,e);}if(e==67){return true;}return false;}}if((O&&e==97)||(O&&e==65)){return true;}if(E==6&&C){var H=this._isSpecialKey(e);return H;}}return C;}}return L;},GetSelectionInValue:function(l,n,o,q){var s=0;for(i=0;i<n.length;i++){if(i>=l){break;}var r=n.substring(i,i+1);var a=(!isNaN(parseInt(r)));if(a||(q&&n.substring(i,i+1)==o)){s++;}}return s;},GetSelectionLengthInValue:function(n,l,o,q){var s=0;for(i=0;i<o.length;i++){if(i>=n+l){break;}var r=o.substring(i,i+1);var a=(!isNaN(parseInt(r)));if(l>0&&i>=n&&a||(i>=n&&o[i].toString()==q)){s++;}}return s;},GetInsertTypeByPositionInValue:function(q,n,l,o){var s="before";var a=this.GetValueString(l,n,o);var r=this.GetDigitsToSeparator(0,a,n);if(q>r){s="after";}return s;},RemoveRange:function(S,T,L,R,E,W){var Q=this.digits;var J=S;var D=T;var V=0;var I=this.decimal;var K=this._selection();var L=this.numberInput.val();var R=this.decimalSeparator;var P=R!="";if(D==0&&this.ValueString.length<this.decimalPossibleChars-1){return V;}var C=this.GetSeparatorPositionInText(R,L);if(!E){C=this.GetSeparatorPositionInText(R,L);}if(C<0&&!P&&L.length>1){C=L.length;}if(C==-1){C=L.length;}var U=P?1:0;if(T<2&&W==true){var M=this.ValueString.length-this.decimalDigits-U;if((M)==Q&&S+T<C){D++;}}var O="";for(var F=0;F<L.length;F++){if(F<J||F>=J+D){O+=L.substring(F,F+1);continue;}else{var G=L.substring(F,F+1);if(G==R){O+=R;continue;}else{var G=L.substring(F,F+1);if(this.symbol&&this.symbol!=""&&this.symbol.indexOf(G)>=0){continue;}if(F>C){O+="0";continue;}}}var G=L.substring(F,F+1);var H=(!isNaN(parseInt(G)));if(H){V++;}}if(O.length==0){O="0";}if(E){this.numberInput.val(O);}else{this.ValueString=O;}var N=O.substring(0,1);if(N==R&&isNaN(parseInt(N))){var a="0"+O;O=a;}this.ValueString=this.GetValueString(O,R,P);this.decimal=this.ValueString;this._parseDecimalInSimpleMode();this._setSelectionStart(J);return V;},InsertDigit:function(G,M){if(typeof this.digits!="number"){this.digits=parseInt(this.digits);}if(typeof this.decimalDigits!="number"){this.decimalDigits=parseInt(this.decimalDigits);}var R=1+this.digits;var L=this._selection();var N=this.getvalue("negative");var W=false;if(L.start==0&&this.symbol!=""&&this.symbolPosition=="left"){this._setSelectionStart(L.start+1);L=this._selection();W=true;}if((N&&W)||(N&&!W&&L.start==0)){this._setSelectionStart(L.start+1);L=this._selection();}var a=this.numberInput.val().substring(L.start,L.start+1);var J=this.numberInput.val();var T=this.decimalSeparator;var Q=T!=""&&this.decimalDigits>0;if(a==this.symbol&&this.symbolPosition=="right"){if(this.decimalDigits==0){this.ValueString=this.GetValueString(J,T,Q);if(this.ValueString.length>=R){return;}}else{return;}}this.ValueString=this.GetValueString(J,T,Q);if(this.ValueString==""){this.ValueString=new Number(0).toFixed(this.decimalDigits);}var D=this.ValueString;if(this.decimalDigits>0&&M>=D.length){M=D.length-1;}var I="";if(M<D.length){I=D.substring(M,M+1);}var S=false;var O=false;var V=this.GetInsertTypeByPositionInValue(M,T,J,Q);if(V=="after"){S=true;}var Y=Q?1:0;if(I!=T&&(this.ValueString.length-this.decimalDigits-Y)>=R-1){S=true;}if(I==="0"&&this.ValueString.length===1&&this.decimalDigits===0){S=true;}var H=false;var F=Q?1:0;if(!S&&this.ValueString&&this.ValueString.length>=this.digits+this.decimalDigits+F){return;}if(S&&I!=T){if(H){M++;}var K=D.substring(0,M);if(K.length==D.length){if(this.ValueString.length>=this.digits+this.decimalDigits+F){return;}}var E=G;var X="";if(M+1<D.length){X=D.substring(M+1);}var P=K+E+X;this.ValueString=P;}else{var K=D.substring(0,M);var E=G;var X=D.substring(M);var P=K+E+X;if(D.substring(0,1)=="0"&&D.substring(1,2)==T){P=E+D.substring(1);if(I==T){this._setSelectionStart(L.start-1);L=this._selection();}}this.ValueString=P;}if(N){this.decimal=-this.ValueString;}else{this.decimal=this.ValueString;}this._parseDecimalInSimpleMode();var U=L.start;U+=1;this._setSelectionStart(U);this.value=this.decimal;this._raiseEvent(0,this.value);this._raiseEvent(1,this.numberInput.val());},GetStringToSeparator:function(l,o,q){var r="";var a=o;var n=this.GetSeparatorPositionInText(o,l);var s=l.subString(0,n);r=this.GetValueString(s,o,q);return r;},GetSeparatorPositionInText:function(f,e){var a=-1;for(i=0;i<e.length;i++){if(e.substring(i,i+1)==f){a=i;break;}}return a;},GetValueString:function(l,n,o){var r="";for(var s=0;s<l.length;s++){var q=l.substring(s,s+1);var a=(!isNaN(parseInt(q)));if(a){r+=q;}if(q==n){r+=n;}}return r;},Backspace:function(){var l=this._selection();var h=this._selection();var g=this.numberInput.val();if(l.start==0&&l.length==0){return;}this.isBackSpace=true;var n=g.substring[l.start,l.start+1];var a=(!isNaN(parseInt(n)));if(l.start>0&&l.length==0){this._setSelectionStart(l.start-1);var l=this._selection();}this.Delete();this._setSelectionStart(h.start-1);this.isBackSpace=false;},Delete:function(s){var q=this._selection();var n=this.numberInput.val();var o=q.start;var l=q.length;l=Math.max(l,1);this.ValueString=this.GetValueString(n,this.decimalSeparator,this.decimalSeparator!="");this.RemoveRange(q.start,l,this.ValueString,".",false);var r=this.ValueString.substring(0,1);var a=(!isNaN(parseInt(r)));if(!a){this.ValueString="0"+this.ValueString;}this.decimal=this.ValueString;this._parseDecimalInSimpleMode();this._setSelectionStart(o);this.value=this.decimal;this._raiseEvent(0,this.value);this._raiseEvent(1,this.numberInput.val());},insertsimple:function(u){var o=this._selection();var a=this.numberInput.val();if(o.start==a.length&&this.decimal!=null&&this.decimalDigits>0){return;}var w=this.decimal;var r=this.decimalSeparator;this.ValueString=this.GetValueString(a,r,r!="");var q=this.GetSelectionInValue(o.start,a,r,r!="");var t=this.GetSelectionLengthInValue(o.start,o.length,a,r);var s=this.GetDigitsToSeparator(0,this.ValueString,r);var v=false;if(this.decimalDigits>0&&q>=this.ValueString.length){q--;}if(this.ValueString==""){this.ValueString=new Number(0).toFixed(this.decimalDigits);this.InsertDigit(u,q,o);return;}this.RemoveRange(o.start,t,this.ValueString,r,false,true);this.InsertDigit(u,q,o);},GetDigitsToSeparator:function(f,a,e){if(e==undefined){e=".";}if(a.indexOf(e)<0){return a.length;}for(i=0;i<a.length;i++){if(a.substring(i,i+1)==e){f=i;break;}}return f;},_handleSimpleKeyDown:function(y,H){var I=this._selection();var F=y.ctrlKey||y.metaKey;if((H==8||H==46)&&F){this.setDecimal(null);return false;}if(I.start>=0&&I.start<this.items.length){var D=String.fromCharCode(H);}if(this.rtl&&H==37){var E=y.shiftKey;var B=E?1:0;if(E){this._setSelection(I.start+1-B,I.start+I.length+1);}else{this._setSelection(I.start+1-B,I.start+1);}return false;}else{if(this.rtl&&H==39){var E=y.shiftKey;var B=E?1:0;if(E){this._setSelection(I.start-1,I.length+B+I.start-1);}else{this._setSelection(I.start-1,I.start-1);}return false;}}if(H==8){this.Backspace();return false;}if(H==190||H==110){var z=this.GetSeparatorPositionInText(this.decimalSeparator,this.numberInput.val());if(z!=-1){this._setSelectionStart(z+1);}return false;}if(H==188){var J=this.numberInput.val();for(A=I.start;A<J.length;A++){if(J[A]==this.groupSeparator){this._setSelectionStart(1+A);break;}}return false;}var F=y.ctrlKey||y.metaKey;if((F&&H==99)||(F&&H==67)){var I=this._selection();var G="";var K=this.numberInput.val();if(I.start>0||I.length>0){for(var A=I.start;A<I.end;A++){G+=K.substring(A,A+1);}}b.data(document.body,"jqxSelection",G);if(b.jqx.browser.msie){window.clipboardData.setData("Text",G);}else{var x=this;var C=b('<textarea style="position: absolute; left: -1000px; top: -1000px;"/>');C.val(G);b("body").append(C);C.select();setTimeout(function(){document.designMode="off";C.select();C.remove();x.focus();},100);}this.savedText=G;return true;}if((F&&H==122)||(F&&H==90)){return false;}if((F&&H==118)||(F&&H==86)||(y.shiftKey&&H==45)){if(b.jqx.browser.msie&&!this.savedText){this.savedText=window.clipboardData.getData("Text");}if(this.savedText!=null&&this.savedText.length>0){this.val(this.savedText);}else{this.val(b.data(document.body,"jqxSelection"));}return false;}var D=String.fromCharCode(H);var e=parseInt(D);if(H>=96&&H<=105){e=H-96;H=H-48;}if(!isNaN(e)){var x=this;this.insertsimple(e);return false;}if(H==46){this.Delete();return false;}if(H==38){this.spinUp();return false;}else{if(H==40){this.spinDown();return false;}}var a=this._isSpecialKey(H);if(!b.jqx.browser.mozilla){return true;}return a;},_getEditRange:function(){var d=0;var a=0;for(i=0;i<this.items.length;i++){if(this.items[i].canEdit){d=i;break;}}for(i=this.items.length-1;i>=0;i--){if(this.items[i].canEdit){a=i;break;}}return{start:d,end:a};},_getVisibleItems:function(){var a=new Array();var d=0;for(i=0;i<this.items.length;i++){if(this.items[i].character.toString().length>0){a[d]=this.items[i];d++;}}return a;},_hasEmptyVisibleItems:function(){var a=this._getVisibleItems();for(i=0;i<a.length;i++){if(a[i].canEdit&&a[i].character==this.promptChar){return true;}}return false;},_getFirstVisibleNonEmptyIndex:function(){var a=this._getVisibleItems();for(i=0;i<a.length;i++){if(a[i].canEdit&&a[i].character!=this.promptChar){return i;}}},_handleMouse:function(e,a){var g=this._selection();if(g.length<=1){var h=this._getFirstVisibleNonEmptyIndex();if(g.start<h){this._setSelectionStart(h);}}},_insertKey:function(t){this.numberInput[0].focus();var y=String.fromCharCode(t);var x=parseInt(y);if(isNaN(x)){return;}var a=0;for(i=0;i<this.items.length;i++){if(this.items[i].character.length==0){a++;}}var v=this._selection();var A=this;if(v.start>=0&&v.start<=this.items.length){var w=false;var u=this._getFirstVisibleNonEmptyIndex();if(v.start<u&&v.length==0){if(!isNaN(y)||y==" "){this._setSelectionStart(u);v=this._selection();}}var z=this._getFirstEditableItemIndex();var r=this._getLastEditableItemIndex();var s=this._getVisibleItems();b.each(s,function(n,f){if(v.start>n&&n!=s.length-1){return;}var I=s[n];if(n>r){I=s[r];}if(isNaN(y)||y==" "){return;}if(!I.canEdit){return;}var g=A._getSeparatorPosition();if(A._match(y,I.regex)){if(!w&&v.length>0){for(j=v.start+a;j<v.end+a;j++){if(A.items[j].canEdit){if(j>g){A.items[j].character="0";}else{A.items[j].character=A.promptChar;}}}var d=A._getString();w=true;}var g=A._getSeparatorPosition();var l=A._hasEmptyVisibleItems();if(A.decimal==null){v.start=g-1;if(v.start<0){v.start=0;}v.end=v.start;}if(v.start<=g&&l){var q=n;if(A.decimalSeparatorPosition==-1&&v.start==g){q=n+1;}if(A.decimal==null){q=v.start;}var F="";for(p=0;p<q;p++){if(s[p].canEdit&&s[p].character!=A.promptChar){F+=s[p].character;}}F+=y;var o=A.decimal<1?1:0;if(v.start==g&&A.decimalSeparatorPosition!=-1){F+=A.decimalSeparator;o=0;}for(p=q+o;p<s.length;p++){if(s[p].character==A.decimalSeparator&&s[p].isSeparator){F+=s[p].character;}else{if(s[p].canEdit&&s[p].character!=A.promptChar){F+=s[p].character;}}}if(A.decimalSeparator!="."){F=A._parseDecimalValue(F);}F=parseFloat(F).toString();F=new Number(F);F=F.toFixed(A.decimalDigits);if(A.decimalSeparator!="."){F=A._parseDecimalValueToEditorValue(F);}A.setvalue("decimal",F);var d=A._getString();if(v.end<g){A._setSelectionStart(v.end+o);}else{A._setSelectionStart(v.end);}if(v.length>=1){A._setSelectionStart(v.end);}if(v.length==A.numberInput.val().length){var c=A._moveCaretToDecimalSeparator();var e=A.decimalSeparatorPosition>=0?1:0;A._setSelectionStart(c-e);}}else{if(v.start<g||v.start>g){if(A.numberInput.val().length==v.start&&A.decimalSeparatorPosition!=-1){return false;}else{if(A.numberInput.val().length==v.start&&A.decimalSeparatorPosition==-1&&!l){return false;}}var F="";var H=false;for(p=0;p<n;p++){if(s[p].canEdit&&s[p].character!=A.promptChar){F+=s[p].character;}if(s[p].character==A.decimalSeparator&&s[p].isSeparator){F+=s[p].character;H=true;}}F+=y;var o=A.decimal<1?1:0;if(!H&&v.start==g-1){F+=A.decimalSeparator;H=true;}for(p=n+1;p<s.length;p++){if(!H&&s[p].character==A.decimalSeparator&&s[p].isSeparator){F+=s[p].character;}else{if(s[p].canEdit&&s[p].character!=A.promptChar){F+=s[p].character;}}}A.setvalue("decimal",F);var d=A._getString();if(A.decimalSeparatorPosition<0&&I==s[r]){A._setSelectionStart(n);return false;}var h=d.indexOf(A.symbol);var G=!A.getvalue("negative")?0:1;if(h<=G){h=d.length;}if(v.start<h){A._setSelectionStart(n+1);}else{A._setSelectionStart(n);}if(v.length>=1){}if(v.length==A.numberInput.val().length){var c=A._moveCaretToDecimalSeparator();A._setSelectionStart(c-1);}}}return false;}});}},_handleKeyPress:function(n,r){var q=this._selection();var a=this;var e=n.ctrlKey||n.metaKey;if((e&&r==97)||(e&&r==65)){return true;}if(r==8){if(q.start>0){a._setSelectionStart(q.start);}return false;}if(r==46){if(q.start<this.items.length){a._setSelectionStart(q.start);}return false;}if(!b.jqx.browser.mozilla){if(r==45||r==173||r==109||r==189){var s=this.getvalue("negative");if(s==false){this.setvalue("negative",true);}else{this.setvalue("negative",false);}}}if(b.jqx.browser.msie){this._insertKey(r);}var o=this._isSpecialKey(r);return o;},_deleteSelectedText:function(){var l=this._selection();var n="";var g=this._getSeparatorPosition();var a=this._getVisibleItems();var h=this._getHiddenPrefixCount();if(this.numberInput.val().length==l.start&&l.length==0){this._setSelection(l.start,l.start+1);l=this._selection();}for(i=0;i<l.start;i++){if(a[i].canEdit&&a[i].character!=this.promptChar){n+=a[i].character;}else{if(!a[i].canEdit&&this.decimalSeparatorPosition!=-1&&a[i]==a[this.decimalSeparatorPosition-h]){if(n.length==0){n="0";}n+=a[i].character;}}}for(i=l.start;i<l.end;i++){if(i>g&&this.decimalSeparatorPosition!=-1){if(a[i].canEdit&&a[i].character!=this.promptChar){n+="0";}}else{if(!a[i].canEdit&&this.decimalSeparatorPosition!=-1&&a[i]==a[this.decimalSeparatorPosition-h]){if(n.length==0){n="0";}n+=a[i].character;}}}for(i=l.end;i<a.length;i++){if(a[i].canEdit&&a[i].character!=this.promptChar){n+=a[i].character;}else{if(!a[i].canEdit&&this.decimalSeparatorPosition!=-1&&a[i]==a[this.decimalSeparatorPosition-h]){if(n.length==0){n="0";}n+=a[i].character;}}}this.setvalue("decimal",n);return l.length>0;},_restoreInitialState:function(){var a=parseInt(this.decimalDigits);if(a>0){a+=2;}for(k=this.items.length-1;k>this.items.length-1-a;k--){if(this.items[k].canEdit&&this.items[k].character==this.promptChar){this.items[k].character=0;}}},clear:function(){this.setDecimal(0);},clearDecimal:function(){if(this.inputMode=="textbox"){this.numberInput.val();return;}for(var a=0;a<this.items.length;a++){if(this.items[a].canEdit){this.items[a].character=this.promptChar;}}this._restoreInitialState();},_saveSelectedText:function(){var f=this._selection();var e="";var a=this._getVisibleItems();if(f.start>0||f.length>0){for(i=f.start;i<f.end;i++){if(a[i].canEdit&&a[i].character!=this.promptChar){e+=a[i].character;}else{if(a[i].isSeparator){e+=a[i].character;}}}}if(b.jqx.browser.msie){window.clipboardData.setData("Text",e);}return e;},_pasteSelectedText:function(){var s=this._selection();var q="";var v=0;this.selectedText=b.data(document.body,"jqxSelection");if(window.clipboardData){var u=window.clipboardData.getData("Text");if(u!=this.selectedText&&u.length>0){this.selectedText=window.clipboardData.getData("Text");if(this.selectedText==null||this.selectedText==undefined){return;}}}var t=s.start;var a=this._getVisibleItems();if(this.selectedText!=null){for(var o=0;o<this.selectedText.length;o++){var w=parseInt(this.selectedText[o]);if(!isNaN(w)){var r=48+w;this._insertKey(r);}}}},_getHiddenPrefixCount:function(){var a=0;if(!this.negative){a++;}if(this.symbolPosition=="left"){for(i=0;i<this.symbol.length;i++){if(this.symbol.substring(i,i+1)==""){a++;}}}return a;},_getEditableItem:function(){var a=this._selection();for(i=0;i<this.items.length;i++){if(i<a.start){if(this.items[i].canEdit&&this.items[i].character!=this.promptChar){return this.items[i];}}}return null;},_getEditableItems:function(){var d=new Array();var a=0;for(i=0;i<this.items.length;i++){if(this.items[i].canEdit){d[a]=this.items[i];a++;}}return d;},_getValidSelectionStart:function(a){for(i=this.items.length-1;i>=0;i--){if(this.items[i].canEdit&&this.items[i].character!=this.promptChar){return i;}}return -1;},_getEditableItemIndex:function(q){var n=this._selection();var l=this._getHiddenPrefixCount();var a=this._getVisibleItems();var o=n.start;var h=-1;for(i=0;i<o;i++){if(i<a.length&&a[i].canEdit){h=i+l;}}if(h==-1&&n.length>0){o=n.end;for(i=0;i<o;i++){if(i<a.length&&a[i].canEdit){h=i+l;break;}}}return h;},_getEditableItemByIndex:function(a){for(k=0;k<this.items.length;k++){if(k>a){if(this.items[k].canEdit&&this.items[k].character!=this.promptChar){return k;}}}return -1;},_getFirstEditableItemIndex:function(){var a=this._getVisibleItems();for(m=0;m<a.length;m++){if(a[m].character!=this.promptChar&&a[m].canEdit&&a[m].character!="0"){return m;}}return -1;},_getLastEditableItemIndex:function(){var a=this._getVisibleItems();for(m=a.length-1;m>=0;m--){if(a[m].character!=this.promptChar&&a[m].canEdit){return m;}}return -1;},_moveCaretToDecimalSeparator:function(){for(i=this.items.length-1;i>=0;i--){if(this.items[i].character==this.decimalSeparator&&this.items[i].isSeparator){if(!this.negative){this._setSelectionStart(i);return i;}else{this._setSelectionStart(i+1);return i;}break;}}return this.numberInput.val().length;},_handleBackspace:function(){var n=this._selection();var l=this._getHiddenPrefixCount();var a=this._getEditableItemIndex()-l;if(a>=0){if(n.length==0&&a!=-1){this._setSelection(a,a+1);}var h=n.start>this._getSeparatorPosition()+1&&this.decimalSeparatorPosition>0;if(h){n=this._selection();}var o=this._deleteSelectedText();if(n.length<1||h){this._setSelectionStart(n.start);}else{if(n.length>=1){this._setSelectionStart(n.end);}}if(n.length==this.numberInput.val().length){var q=this._moveCaretToDecimalSeparator();this._setSelectionStart(q-1);}}else{this._setSelectionStart(n.start);}},_handleKeyDown:function(y,G){var a=this._selection();var C=y.ctrlKey||y.metaKey;if((G==8||G==46)&&C){this.setDecimal(null);return false;}if(this.rtl&&G==37){var B=y.shiftKey;var z=B?1:0;if(B){this._setSelection(a.start+1-z,a.start+a.length+1);}else{this._setSelection(a.start+1-z,a.start+1);}return false;}else{if(this.rtl&&G==39){var B=y.shiftKey;var z=B?1:0;if(B){this._setSelection(a.start-1,a.length+z+a.start-1);}else{this._setSelection(a.start-1,a.start-1);}return false;}}if((C&&G==97)||(C&&G==65)){return true;}if((C&&G==120)||(C&&G==88)){this.selectedText=this._saveSelectedText(y);b.data(document.body,"jqxSelection",this.selectedText);this._handleBackspace();return false;}if((C&&G==99)||(C&&G==67)){this.selectedText=this._saveSelectedText(y);b.data(document.body,"jqxSelection",this.selectedText);return false;}if((C&&G==122)||(C&&G==90)){return false;}if((C&&G==118)||(C&&G==86)||(y.shiftKey&&G==45)){this._pasteSelectedText();return false;}if(a.start>=0&&a.start<this.items.length){var A=String.fromCharCode(G);var E=this.items[a.start];}if(G==8){this._handleBackspace();return false;}if(G==190||G==110){this._moveCaretToDecimalSeparator();return false;}if(G==188){var e=this.numberInput.val();for(i=a.start;i<e.length;i++){if(e[i]==this.groupSeparator){this._setSelectionStart(1+i);break;}}return false;}if(b.jqx.browser.msie==null){var A=String.fromCharCode(G);var w=parseInt(A);if(G>=96&&G<=105){w=G-96;G=G-48;}if(!isNaN(w)){var x=this;x._insertKey(G);return false;}}if(G==46){var F=this._getVisibleItems();if(a.start<F.length){var z=F[a.start].canEdit==false?2:1;if(a.length==0){this._setSelection(a.start+z,a.start+z+a.length);}this._handleBackspace();if(new Number(this.decimal)<1||a.start>this._getSeparatorPosition()){this._setSelectionStart(a.end+z);}else{if(a.start+1<this.decimalSeparatorPosition){this._setSelectionStart(a.end+z);}}}return false;}if(G==38){this.spinUp();return false;}else{if(G==40){this.spinDown();return false;}}var v=this._isSpecialKey(G);if(b.jqx.browser.mozilla){if(G==45||G==173||G==109||G==189){var D=this.getvalue("negative");if(D==false){this.setvalue("negative",true);}else{this.setvalue("negative",false);}}}if(!b.jqx.browser.mozilla){return true;}return v;},_isSpecialKey:function(a){if(a!=8&&a!=9&&a!=13&&a!=35&&a!=36&&a!=37&&a!=39&&a!=27&&a!=46){return false;}return true;},_selection:function(){try{if("selectionStart" in this.numberInput[0]){var l=this.numberInput[0];var e=l.selectionEnd-l.selectionStart;return{start:l.selectionStart,end:l.selectionEnd,length:e,text:l.value};}else{var o=document.selection.createRange();if(o==null){return{start:0,end:l.value.length,length:0};}var q=this.numberInput[0].createTextRange();var n=q.duplicate();q.moveToBookmark(o.getBookmark());n.setEndPoint("EndToStart",q);var e=o.text.length;return{start:n.text.length,end:n.text.length+o.text.length,length:e,text:o.text};}}catch(a){return{start:0,end:0,length:0};}},_setSelection:function(g,a){if(this._disableSetSelection==true){return;}var h=b.jqx.mobile.isTouchDevice();if(h||this.touchMode==true){return;}try{if("selectionStart" in this.numberInput[0]){this.numberInput[0].focus();this.numberInput[0].setSelectionRange(g,a);}else{var n=this.numberInput[0].createTextRange();n.collapse(true);n.moveEnd("character",a);n.moveStart("character",g);n.select();}}catch(l){}},_setSelectionStart:function(a){this._setSelection(a,a);b.data(this.numberInput,"selectionstart",a);},resize:function(d,a){this.width=d;this.height=a;this._render(false);},_render:function(w){var z=parseInt(this.host.css("border-left-width"));var u=parseInt(this.host.css("border-left-width"));var v=parseInt(this.host.css("border-left-width"));var y=parseInt(this.host.css("border-left-width"));this.numberInput.css("padding-top","0px");this.numberInput.css("padding-bottom","0px");this.host.height(this.height);this.host.width(this.width);var x=this.host.width();var r=this.host.height();this.numberInput.css({"border-left-width":0,"border-right-width":0,"border-bottom-width":0,"border-top-width":0});this.numberInput.css("text-align",this.textAlign);var a=this.numberInput.css("font-size");this.numberInput.css("height",parseInt(a)+4+"px");this.numberInput.css("width",x-2);var s=r-2*v-parseInt(a)-2;if(isNaN(s)){s=0;}if(s<0){s=0;}if(this.spinButtons&&this.spincontainer){x-=parseInt(this.spinButtonsWidth-2);var t=b.jqx.mobile.isTouchDevice();if(!t&&this.touchMode!==true){this.spincontainer.width(this.spinButtonsWidth);this.upbutton.width(this.spinButtonsWidth+2);this.downbutton.width(this.spinButtonsWidth+2);this.upbutton.height("50%");this.downbutton.height("50%");this.spincontainer.width(this.spinButtonsWidth);}else{this.spincontainer.width(2*(this.spinButtonsWidth));x-=this.spinButtonsWidth;this.upbutton.height("100%");this.downbutton.height("100%");this.downbutton.css("float","left");this.upbutton.css("float","right");this.upbutton.width(this.spinButtonsWidth);this.downbutton.width(1+this.spinButtonsWidth);}this._upArrow.height("100%");this._downArrow.height("100%");this.numberInput.css("width",x-6);this.numberInput.css("margin-right","2px");}var A=s/2;if(b.jqx.browser.msie&&b.jqx.browser.version<8){A=s/4;}this.numberInput.css("padding-left","0px");this.numberInput.css("padding-right","0px");this.numberInput.css("padding-top",Math.round(A)+"px");this.numberInput.css("padding-bottom",Math.round(A)+"px");if(w==undefined||w==true){this.numberInput.val(this._getString());if(this.inputMode!="advanced"){this._parseDecimalInSimpleMode();}}},destroy:function(){this._removeHandlers();this.host.remove();},inputValue:function(a){if(a===undefined){return this._value();}this.propertyChangedHandler(this,"value",this._value,a);this._refreshValue();return this;},_value:function(){var a=this.numberInput.val();return a;},val:function(q){if(q!==undefined&&typeof q!="object"||q===null){if(q===null){this.setDecimal(null);return;}else{var l=q;l=l.toString();if(l.indexOf(this.symbol)>-1){l=l.replace(this.symbol,"");}var a=function(e,g,f){var d=e;if(g==f){return e;}var c=d.indexOf(g);while(c!=-1){d=d.replace(g,f);c=d.indexOf(g);}return d;};l=a(l,this.groupSeparator,"");l=l.replace(this.decimalSeparator,".");var h="";for(var o=0;o<l.length;o++){var n=l.substring(o,o+1);if(n==="-"){h+="-";}if(n==="."){h+=".";}if(n.match(/^[0-9]+$/)!=null){h+=n;}}l=h;l=l.replace(/ /g,"");l=new Number(l);this.setDecimal(l);}}else{return this.getDecimal();}},getDecimal:function(){if(this.decimal==null){return null;}if(this.inputMode=="simple"){this._parseDecimalInSimpleMode(false);this.decimal=this._getDecimalInSimpleMode(this.decimal);}if(this.decimal==""){return 0;}var a=this.getvalue("negative");if(a&&this.decimal>0){return -parseFloat(this.decimal);}return parseFloat(this.decimal);},setDecimal:function(n){var a=n;if(this.decimalSeparator!="."){if(n===null){this._setDecimal(n);}else{var o=n;if(typeof(n)!="number"){n=n.toString();var h=n.indexOf(".");if(h!=-1){var q=n.substring(0,h);var l=n.substring(h+1);o=q+"."+l;if(q.indexOf("-")!=-1){q=q.substring(1);}if(this.inputMode!="advanced"){n=q+"."+l;}else{n=q+this.decimalSeparator+l;}}else{var h=n.indexOf(this.decimalSeparator);if(h!=-1){var q=n.substring(0,h);var l=n.substring(h+1);o=q+"."+l;if(q.indexOf("-")!=-1){q=q.substring(1);}if(this.inputMode!="advanced"){n=q+"."+l;}else{n=q+this.decimalSeparator+l;}}}}if(o<0){this.setvalue("negative",true);}else{this.setvalue("negative",false);}this._setDecimal(n);}}else{if(n<0){this.setvalue("negative",true);}else{this.setvalue("negative",false);}if(n===null){this._setDecimal(n);}else{this._setDecimal(Math.abs(n));}}if(a==null){this.numberInput.val("");}},_setDecimal:function(a){if(a==null){this.decimal=null;this.value=null;this._refreshValue();this.decimal=null;this.value=null;return;}if(a==null||a==undefined){a=0;}if(a.toString().indexOf("e")!=-1){a=0;}this.clearDecimal();var G=a.toString();var F="";var E="";var C=true;if(G.length==0){G="0";}for(var z=0;z<G.length;z++){if(G.substring(z,z+1)==this.decimalSeparator){C=false;continue;}if(C){F+=G.substring(z,z+1);}else{E+=G.substring(z,z+1);}}if(F.length>0){F=parseFloat(F).toString();}var v=this.digits;if(v<F.length){F=F.substr(0,v);}var A=0;var u=this._getSeparatorPosition();var w=this._getHiddenPrefixCount();u=u+w;for(var z=u;z>=0;z--){if(z<this.items.length&&this.items[z].canEdit){if(A<F.length){this.items[z].character=F.substring(F.length-A-1,F.length-A);A++;}}}A=0;for(var z=u;z<this.items.length;z++){if(this.items[z].canEdit){if(A<E.length){this.items[z].character=E.substring(A,A+1);A++;}}}this._refreshValue();if(this.decimalSeparator=="."){this.ValueString=new Number(a).toFixed(this.decimalDigits);}else{var x=a.toString().indexOf(this.decimalSeparator);if(x>0){var y=a.toString().substring(0,x);var B=y+"."+a.toString().substring(x+1);this.ValueString=new Number(B).toFixed(this.decimalDigits);}else{this.ValueString=new Number(a).toFixed(this.decimalDigits);}}if(this.inputMode!="advanced"){this._parseDecimalInSimpleMode();this._raiseEvent(1,this.ValueString);}if(this.inputMode=="textbox"){this.decimal=this.ValueString;var D=this.getvalue("negative");if(D){this.decimal="-"+this.ValueString;}}var a=this.val();if(a<this.min||a>this.max){this.host.addClass("jqx-input-invalid");}else{this.host.removeClass("jqx-input-invalid");}},_getSeparatorPosition:function(){var a=this._getHiddenPrefixCount();if(this.decimalSeparatorPosition>0){return this.decimalSeparatorPosition-a;}return this.items.length-a;},_setTheme:function(){this.host.removeClass();this.host.addClass(this.toThemeProperty("jqx-input"));this.host.addClass(this.toThemeProperty("jqx-rc-all"));this.host.addClass(this.toThemeProperty("jqx-widget"));this.host.addClass(this.toThemeProperty("jqx-widget-content"));this.host.addClass(this.toThemeProperty("jqx-numberinput"));if(this.spinButtons){this.downbutton.removeClass();this.upbutton.removeClass();this.downbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal"));this.upbutton.addClass(this.toThemeProperty("jqx-scrollbar-button-state-normal"));this._upArrow.removeClass();this._downArrow.removeClass();this._upArrow.addClass(this.toThemeProperty("jqx-icon-arrow-up"));this._downArrow.addClass(this.toThemeProperty("jqx-icon-arrow-down"));}this.numberInput.removeClass();this.numberInput.addClass(this.toThemeProperty("jqx-input-content"));},propertyChangedHandler:function(s,r,n,o){if(r=="digits"||r=="groupSize"||r=="decimalDigits"){if(o<0){throw new Exception(this.invalidArgumentExceptions[0]);}}if(r==="theme"){b.jqx.utilities.setTheme(n,o,s.host);}if(r=="digits"){if(o!=n){s.digits=parseInt(o);}}if(r=="min"||r=="max"){b.jqx.aria(s,"aria-value"+r,o.toString());s._refreshValue();}if(r=="decimalDigits"){if(o!=n){s.decimalDigits=parseInt(o);}}if(r=="decimalSeparator"||r=="digits"||r=="symbol"||r=="symbolPosition"||r=="groupSize"||r=="groupSeparator"||r=="decimalDigits"||r=="negativeSymbol"){var a=s.decimal;if(r=="decimalSeparator"&&o==""){o=" ";}if(n!=o){var q=s._selection();s.items=new Array();s._initializeLiterals();s.value=s._getString();s._refreshValue();s._setDecimal(a);}}if(r=="rtl"){if(s.rtl){if(s.spincontainer){s.spincontainer.css("float","right");s.spincontainer.css("border-right-width","1px");}s.numberInput.css("float","right");}else{if(s.spincontainer){s.spincontainer.css("float","right");s.spincontainer.css("border-right-width","1px");}s.numberInput.css("float","left");}}if(r=="spinButtons"){if(s.spincontainer){if(!o){s.spincontainer.css("display","none");}else{s.spincontainer.css("display","block");}s._render();}else{s._spinButtons();}}if(r==="touchMode"){s.inputMode="textbox";s.spinMode="simple";s.render();}if(r=="negative"&&s.inputMode=="advanced"){var q=s._selection();var l=0;if(o){s.items[0].character=s.negativeSymbol[0];l=1;}else{s.items[0].character="";l=-1;}s._refreshValue();if(s.isInitialized){s._setSelection(q.start+l,q.end+l);}}if(r=="decimal"){s.value=o;s.setDecimal(o);}if(r==="value"){s.value=o;s.setDecimal(o);s._raiseEvent(1,o);}if(r=="textAlign"){s.textAlign=o;s._render();}if(r=="disabled"){s.numberInput.attr("disabled",o);if(s.disabled){s.host.addClass(s.toThemeProperty("jqx-fill-state-disabled"));}else{s.host.removeClass(s.toThemeProperty("jqx-fill-state-disabled"));}b.jqx.aria(s,"aria-disabled",o.toString());}if(r=="readOnly"){s.readOnly=o;}if(r=="promptChar"){for(i=0;i<s.items.length;i++){if(s.items[i].character==s.promptChar){s.items[i].character=o;}}s.promptChar=o;}if(r=="width"){s.width=o;s._render();}else{if(r=="height"){s.height=o;s._render();}}},_value:function(){var a=this.value;return a;},_refreshValue:function(){var h=this.value;var a=0;if(this.inputMode==="textbox"){return;}this.value=this._getString();h=this.value;var l="";for(var q=0;q<this.items.length;q++){var n=this.items[q];if(n.canEdit&&n.character!=this.promptChar){l+=n.character;}if(q==this.decimalSeparatorPosition){l+=".";}}this.decimal=l;var o=false;if(this.oldValue!==h){this.oldValue=h;this._raiseEvent(0,h);o=true;}if(this.inputMode!="simple"){this.numberInput.val(h);if(o){this._raiseEvent(1,h);}}if(h==null){this.numberInput.val("");}}});})(jqxBaseFramework);